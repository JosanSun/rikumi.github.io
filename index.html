<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="icon" type="image/png" sizes="80x80" href="/favicon.png">

    <!-- Fetched scripts -->
    <script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
    <script src="https://unpkg.com/docute@3.4.8/dist/docute.js"></script>

    <!-- Local scripts -->
    <script src="/static/js/highlight.js"></script>

    <!-- Local stylesheets -->
    <link href="/static/css/markdown.css" rel="stylesheet">
    <link href="/static/css/nprogress.css" rel="stylesheet">
    <link href="/static/css/shower.css?v=6" rel="stylesheet">

    <title>RIKUheya</title>
</head>
<body onload="$(window).resize()">
    <div id="sidebar">
        <a href="/" router-link="/""><img class="avatar" ondragstart="return false" src="https://avatars1.githubusercontent.com/u/5051300"></a>
        <div class="name">Riku</div>
        <div class="profile">「右手携带左手爱」</div>
        <div class="more-icon" onclick="toggleMenu()"></div>
        <br>

        <a class="link" href="/" router-link="/"><li>首页</li></a>
        <a class="link" href="/关于我" router-link="/关于我"><li>关于我</li></a>

        <iframe id="player" src="https://myseu.cn/apcloud/582976667?autoplay=false" frameborder="0"></iframe>

        <script>
            // 实现自动调整播放器高度，根据侧栏可用空间自动选择隐藏播放器或显示 0、1、2、… 个曲目
            $(window).resize(function() {
                var t = $("#sidebar li").last().offset().top + 44
                var b = $("#sidebar .footer").first().offset().top
                var maxHeight = b - t - 60 - 90
                var rows = Math.floor(maxHeight / 33)
                if (rows > -3 && rows < 0) {
                    rows = 0
                }
                if (rows > 8) {
                    rows = 8
                }
                var height = rows * 33 + 89
                $("#player").css("height", height)
            })

            var menu = false

            function toggleMenu() {
                menu = !menu
                if (menu) {
                    $("body").addClass("menu-on")
                } else {
                    $("body").removeClass("menu-on")
                }
            }
        </script>

        <div class="footer"></div>
    </div>
    <div id="main">
        <div id="app" class="markdown-body"></div>
        <div id="disqus_thread"></div>
    </div>
    <script>
        String.prototype.hashCode = function() {
            var hash = 0, i, chr
            if (this.length === 0) return hash
            for (i = 0; i < this.length; i++) {
                chr = this.charCodeAt(i)
                hash = ((hash << 5) - hash) + chr
                hash |= 0
            }
            return hash
        };

        var disqus_developer = 1
    
        function disqus_config() {
            this.page.url = window.location.href.replace(/\/#/g, "")
            this.page.identifier = window.location.hash.replace(/^#/g, "")
        };

        function loadDisqus(){
            if (typeof DISQUS === 'object') {
                DISQUS.reset({
                    reload: true,
                    config: disqus_config
                })
            } else {
                var s = document.createElement('script'); s.async = true;
                s.type = 'text/javascript';
                s.src = '//rikuheya.disqus.com/embed.js';
                (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
            }
        };

        docute.init({
            url: 'https://raw.githubusercontent.com/vhyme/RIKUheya/master/',
            home: 'https://raw.githubusercontent.com/vhyme/RIKUheya/master/README.md',
            // home: 'README.md',
            sidebar: false,
            disableSidebarToggle: true,
            marked: {
                gfm: true,
                tables: true,
                breaks: false,
                pedantic: false,
                sanitize: false,
                smartLists: false,
                smartypants: false,
                highlight: function (code, lang) {
                    if (lang == "") {
                        return hljs.highlightAuto(code).value
                    }
                    return hljs.highlightAuto(code, [lang]).value
                }
            }
        })

        $(loadDisqus)

        docute.router.afterEach(function (to) {
            setTimeout(function() {
                $('html,body').animate({scrollTop: '0px'}, 500)

                loadDisqus()
            })
        })
    </script>
</body>
</html>
